import{c as fe,a as m,f as D,t as J}from"../chunks/CPzlj7tX.js";import{i as st}from"../chunks/B0gZMrfj.js";import{f as oe,p as ot,o as dt,t as j,a as lt,i as a,s as i,j as s,k as t,g as l,m as P,v as ye}from"../chunks/BN8yeNaP.js";import{e as I,s as n}from"../chunks/B7UOL8al.js";import{l as it,s as nt,i as A,a as ct,b as me}from"../chunks/DzUgQEOZ.js";import{I as vt,s as bt,$ as _t,a as ae,r as je,c as re,b as $e,p as ze,e as ut,g as We,i as mt}from"../chunks/DwuaTuXd.js";import{g as ft}from"../chunks/BjfiAF3u.js";import{b as Le}from"../chunks/BAVAyct3.js";import{a as Me,u as xt}from"../chunks/B9P73xU4.js";import"../chunks/CyJRV1yG.js";import{P as Ne,L as se,s as pt}from"../chunks/CaognTaA.js";import{T as Pe}from"../chunks/CYgE8SeJ.js";import{L as gt,P as ht}from"../chunks/C0k3m27H.js";import{A as kt}from"../chunks/DLxmV_E4.js";function wt(de,K){const E=it(K,["children","$$slots","$$events","$$legacy"]);const d=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"}]];vt(de,nt({name:"folder-open"},()=>E,{get iconNode(){return d},children:(le,O)=>{var Q=fe(),M=oe(Q);bt(M,K,"default",{}),m(le,Q)},$$slots:{default:!0}}))}var yt=D('<div class="flex flex-col items-center justify-center py-20 text-slate-400"><!> <p> </p></div>'),jt=D('<div class="p-4 bg-red-50 text-red-600 dark:bg-red-500/10 border border-red-200 dark:border-red-500/20 rounded-xl"> </div>'),$t=D('<div class="text-center py-16 px-4 border border-dashed border-slate-300 dark:border-slate-700 rounded-2xl bg-white dark:bg-slate-900/50"><!> <h3 class="text-lg font-semibold text-slate-800 dark:text-white mb-2"> </h3> <p class="text-sm text-slate-500 max-w-sm mx-auto mb-6"> </p> <button class="inline-flex items-center gap-2 px-4 py-2 bg-indigo-50 text-indigo-600 hover:bg-indigo-100 dark:bg-indigo-500/10 dark:text-indigo-400 dark:hover:bg-indigo-500/20 text-sm font-semibold rounded-lg transition-colors border border-indigo-200 dark:border-indigo-800"><!> </button></div>'),zt=D('<div class="absolute top-4 right-4 flex gap-1 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity"><button class="p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-500/20 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500"><!></button> <button class="p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-500/20 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-red-500"><!></button></div>'),Wt=D('<div class="relative group"><button class="w-full text-left bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 p-5 rounded-xl shadow-sm hover:shadow-md hover:-translate-y-0.5 transition-all duration-300 flex flex-col h-full ring-2 ring-transparent focus:outline-none focus:ring-indigo-500"><div class="w-10 h-10 rounded-lg bg-indigo-50 dark:bg-indigo-500/10 text-indigo-600 dark:text-indigo-400 flex items-center justify-center mb-4 shrink-0 transition-transform"><!></div> <h3 class="text-base font-semibold text-slate-900 dark:text-white mb-2 line-clamp-2 pr-12"> </h3> <div class="mt-auto pt-4 flex items-center justify-end text-xs text-slate-500 dark:text-slate-400 border-t border-slate-100 dark:border-slate-800/50"><span class="flex items-center gap-1 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 font-medium transition-colors"> <!></span></div></button> <!></div>'),Lt=D('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>'),Mt=D('<div class="fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-50 flex items-center justify-center p-4"><div class="bg-white dark:bg-slate-900 rounded-2xl w-full max-w-sm shadow-xl overflow-hidden border border-slate-200 dark:border-slate-800"><div class="px-6 py-6"><h2 class="text-lg font-semibold text-slate-900 dark:text-white mb-5"> </h2> <form class="space-y-4"><div><label for="name" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5"> </label> <input id="name" type="text" class="w-full bg-slate-50 dark:bg-slate-950 border border-slate-200 dark:border-slate-700 text-slate-900 dark:text-white px-3 py-2 text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500/50" required/></div> <div class="flex gap-3 pt-4"><button type="button" class="flex-1 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 dark:bg-slate-800 dark:hover:bg-slate-700 dark:text-slate-300 text-sm font-semibold rounded-lg transition-colors"> </button> <button type="submit" class="flex-1 inline-flex justify-center items-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 disabled:cursor-not-allowed text-white text-sm font-semibold rounded-lg transition-colors shadow-sm"><!></button></div></form></div></div></div>'),Nt=D('<div class="fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-50 flex items-center justify-center p-4"><div class="bg-white dark:bg-slate-900 rounded-2xl w-full max-w-sm shadow-xl overflow-hidden border border-slate-200 dark:border-slate-800"><div class="px-6 py-6"><h2 class="text-lg font-semibold text-slate-900 dark:text-white mb-5"> </h2> <form class="space-y-4"><div><label for="edit_name" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5"> </label> <input id="edit_name" type="text" class="w-full bg-slate-50 dark:bg-slate-950 border border-slate-200 dark:border-slate-700 text-slate-900 dark:text-white px-3 py-2 text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500/50" required/></div> <div class="flex gap-3 pt-4"><button type="button" class="flex-1 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 dark:bg-slate-800 dark:hover:bg-slate-700 dark:text-slate-300 text-sm font-semibold rounded-lg transition-colors"> </button> <button type="submit" class="flex-1 inline-flex justify-center items-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 disabled:cursor-not-allowed text-white text-sm font-semibold rounded-lg transition-colors shadow-sm"><!></button></div></form></div></div></div>'),Pt=D('<div class="fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-50 flex items-center justify-center p-4"><div class="bg-white dark:bg-slate-900 rounded-2xl w-full max-w-sm shadow-xl overflow-hidden border border-slate-200 dark:border-slate-800"><div class="px-6 py-6 text-center"><div class="w-12 h-12 rounded-full bg-red-100 dark:bg-red-500/20 text-red-600 dark:text-red-400 mx-auto flex items-center justify-center mb-4"><!></div> <h2 class="text-xl font-bold text-slate-900 dark:text-white mb-2"> </h2> <p class="text-sm text-slate-500 dark:text-slate-400 mb-6"> </p> <div class="flex gap-3"><button type="button" class="flex-1 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 dark:bg-slate-800 dark:hover:bg-slate-700 dark:text-slate-300 text-sm font-semibold rounded-lg transition-colors"> </button> <button type="button" class="flex-1 inline-flex justify-center items-center px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 disabled:cursor-not-allowed text-white text-sm font-semibold rounded-lg transition-colors shadow-sm"><!></button></div></div></div></div>'),It=D('<div class="min-h-screen bg-slate-50 dark:bg-slate-950 px-4 py-8 rounded-2xl"><div class="w-full mx-auto space-y-8"><header class="flex flex-col md:flex-row justify-between items-start md:items-end gap-4 border-b border-slate-200 dark:border-slate-800 pb-8"><div><h1 class="text-2xl md:text-3xl font-bold text-slate-900 dark:text-white mb-1 tracking-tight"> </h1> <p class="text-slate-500 dark:text-slate-400 text-sm md:text-base"><!></p></div> <button class="inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-semibold rounded-lg transition-all shadow-sm ring-1 ring-indigo-500/50 active:scale-95"><!> </button></header> <!></div></div> <!> <!> <!>',1);function Kt(de,K){ot(K,!1);const E=()=>me(xt,"$user",O),d=()=>me(_t,"$_",O),le=()=>me(Me,"$authLoading",O),[O,Q]=ct();let M=P([]),ie=P(!0),R=P(!1),T=P(""),V=P(!1),k=P(""),X=P(!1),C=null,F=P(""),Y=P(!1),Z=P(!1),U=null,ee=P(!1);dt(()=>Me.subscribe(r=>{r||(E()?Ie():ft(`${Le}/login`))}));async function Ie(){s(ie,!0),s(k,"");try{const e=await ae.workspaces.getList(),r=await e.json();e.ok?s(M,r.workspaces||[]):s(k,r.error||"Failed to load workspaces")}catch{s(k,"Network error fetching workspaces")}finally{s(ie,!1)}}async function Ae(){if(l(T).trim()){s(R,!0),s(k,"");try{const e=await ae.workspaces.create(l(T)),r=await e.json();e.ok&&r.workspace?(s(M,[...l(M),r.workspace]),s(V,!1),s(T,"")):s(k,r.error||"Failed to create workspace")}catch{s(k,"Network error creating workspace")}finally{s(R,!1)}}}function De(e){C=e,s(F,e.name),s(X,!0)}async function Fe(){if(!(!C||!C.id||!l(F).trim())){s(Y,!0),s(k,"");try{const e=await ae.workspaces.update(C.id,l(F));if(e.ok)s(M,l(M).map(r=>r.id===C.id?{...r,name:l(F)}:r)),s(X,!1),C=null,s(F,"");else{const r=await e.json();s(k,r.error||d()("dashboard__error_update"))}}catch{s(k,d()("dashboard__error_update"))}finally{s(Y,!1)}}}function He(e){U=e,s(Z,!0)}async function qe(){if(!(!U||!U.id)){s(ee,!0),s(k,"");try{const e=await ae.workspaces.delete(U.id);if(e.ok)s(M,l(M).filter(r=>r.id!==U.id)),s(Z,!1),U=null;else{const r=await e.json();s(k,r.error||d()("dashboard__error_delete"))}}catch{s(k,d()("dashboard__error_delete"))}finally{s(ee,!1)}}}function Ee(e){e.id&&pt(e.id,e.name,e.owner_id),localStorage.setItem("sync-room-code",e.room_code),localStorage.setItem("sync-server-url","asdsada");const r=`${Le}/workspace/${e.id}?room=${e.room_code}`;window.location.href=r}st();var xe=It(),ne=oe(xe),pe=a(ne),ce=a(pe),ve=a(ce),be=a(ve),Se=a(be,!0);t(be);var ge=i(be,2),Te=a(ge);{var Ce=e=>{var r=J();j(f=>n(r,f),[()=>d()("dashboard__welcome").replace("{email}",E().email)]),m(e,r)},Ue=e=>{var r=J();j(f=>n(r,f),[()=>d()("dashboard__loading_user")]),m(e,r)};A(Te,e=>{E()?e(Ce):e(Ue,!1)})}t(ge),t(ve);var _e=i(ve,2),he=a(_e);Ne(he,{size:18});var Ve=i(he);t(_e),t(ce);var Be=i(ce,2);{var Ge=e=>{var r=yt(),f=a(r);se(f,{class:"w-10 h-10 animate-spin mb-4"});var $=i(f,2),g=a($,!0);t($),t(r),j(w=>n(g,w),[()=>d()("dashboard__loading_projects")]),m(e,r)},Je=e=>{var r=fe(),f=oe(r);{var $=w=>{var v=jt(),z=a(v,!0);t(v),j(()=>n(z,l(k))),m(w,v)},g=w=>{var v=fe(),z=oe(v);{var W=c=>{var b=$t(),p=a(b);wt(p,{class:"w-12 h-12 mx-auto text-slate-400 dark:text-slate-600 mb-4"});var _=i(p,2),h=a(_,!0);t(_);var y=i(_,2),N=a(y,!0);t(y);var u=i(y,2),o=a(u);Ne(o,{size:16});var x=i(o);t(u),t(b),j((L,H,q)=>{n(h,L),n(N,H),n(x,` ${q??""}`)},[()=>d()("dashboard__empty_title"),()=>d()("dashboard__empty_desc"),()=>d()("dashboard__btn_new")]),I("click",u,()=>s(V,!0)),m(c,b)},S=c=>{var b=Lt();ut(b,5,()=>l(M),mt,(p,_)=>{var h=Wt(),y=a(h),N=a(y),u=a(N);gt(u,{size:20}),t(N);var o=i(N,2),x=a(o,!0);t(o);var L=i(o,2),H=a(L),q=a(H),Xe=i(q);kt(Xe,{size:14,class:"group-hover:translate-x-1 transition-transform"}),t(H),t(L),t(y);var Ye=i(y,2);{var Ze=B=>{var ue=zt(),G=a(ue),et=a(G);ht(et,{size:16}),t(G);var te=i(G,2),tt=a(te);Pe(tt,{size:16}),t(te),t(ue),j((at,rt)=>{re(G,"title",at),re(te,"title",rt)},[()=>d()("dashboard__btn_edit"),()=>d()("dashboard__btn_delete")]),I("click",G,We(()=>De(l(_)))),I("click",te,We(()=>He(l(_)))),m(B,ue)};A(Ye,B=>{E()&&l(_).owner_id===E().id&&B(Ze)})}t(h),j(B=>{n(x,l(_).name),n(q,`${B??""} `)},[()=>d()("dashboard__btn_open")]),I("click",y,()=>Ee(l(_))),m(p,h)}),t(b),m(c,b)};A(z,c=>{l(M).length===0?c(W):c(S,!1)},!0)}m(w,v)};A(f,w=>{l(k)?w($):w(g,!1)},!0)}m(e,r)};A(Be,e=>{l(ie)||le()?e(Ge):e(Je,!1)})}t(pe),t(ne);var ke=i(ne,2);{var Ke=e=>{var r=Mt(),f=a(r),$=a(f),g=a($),w=a(g,!0);t(g);var v=i(g,2),z=a(v),W=a(z),S=a(W,!0);t(W);var c=i(W,2);je(c),ye(c,!0),t(z);var b=i(z,2),p=a(b),_=a(p,!0);t(p);var h=i(p,2),y=a(h);{var N=o=>{se(o,{class:"w-4 h-4 animate-spin"})},u=o=>{var x=J();j(L=>n(x,L),[()=>d()("dashboard__modal_btn_create")]),m(o,x)};A(y,o=>{l(R)?o(N):o(u,!1)})}t(h),t(b),t(v),t($),t(f),t(r),j((o,x,L,H,q)=>{n(w,o),n(S,x),re(c,"placeholder",L),n(_,H),h.disabled=q},[()=>d()("dashboard__modal_title"),()=>d()("dashboard__modal_name_label"),()=>d()("dashboard__modal_name_placeholder"),()=>d()("dashboard__modal_btn_cancel"),()=>l(R)||!l(T).trim()]),$e(c,()=>l(T),o=>s(T,o)),I("click",p,()=>s(V,!1)),I("submit",v,ze(Ae)),m(e,r)};A(ke,e=>{l(V)&&e(Ke)})}var we=i(ke,2);{var Oe=e=>{var r=Nt(),f=a(r),$=a(f),g=a($),w=a(g,!0);t(g);var v=i(g,2),z=a(v),W=a(z),S=a(W,!0);t(W);var c=i(W,2);je(c),ye(c,!0),t(z);var b=i(z,2),p=a(b),_=a(p,!0);t(p);var h=i(p,2),y=a(h);{var N=o=>{se(o,{class:"w-4 h-4 animate-spin"})},u=o=>{var x=J();j(L=>n(x,L),[()=>d()("dashboard__modal_btn_save")]),m(o,x)};A(y,o=>{l(Y)?o(N):o(u,!1)})}t(h),t(b),t(v),t($),t(f),t(r),j((o,x,L,H,q)=>{n(w,o),n(S,x),re(c,"placeholder",L),n(_,H),h.disabled=q},[()=>d()("dashboard__modal_edit_title"),()=>d()("dashboard__modal_name_label"),()=>d()("dashboard__modal_name_placeholder"),()=>d()("dashboard__modal_btn_cancel"),()=>l(Y)||!l(F).trim()]),$e(c,()=>l(F),o=>s(F,o)),I("click",p,()=>s(X,!1)),I("submit",v,ze(Fe)),m(e,r)};A(we,e=>{l(X)&&e(Oe)})}var Qe=i(we,2);{var Re=e=>{var r=Pt(),f=a(r),$=a(f),g=a($),w=a(g);Pe(w,{size:24}),t(g);var v=i(g,2),z=a(v,!0);t(v);var W=i(v,2),S=a(W,!0);t(W);var c=i(W,2),b=a(c),p=a(b,!0);t(b);var _=i(b,2),h=a(_);{var y=u=>{se(u,{class:"w-4 h-4 animate-spin"})},N=u=>{var o=J();j(x=>n(o,x),[()=>d()("dashboard__modal_btn_delete_confirm")]),m(u,o)};A(h,u=>{l(ee)?u(y):u(N,!1)})}t(_),t(c),t($),t(f),t(r),j((u,o,x)=>{n(z,u),n(S,o),n(p,x),_.disabled=l(ee)},[()=>d()("dashboard__modal_delete_title"),()=>d()("dashboard__modal_delete_warning"),()=>d()("dashboard__modal_btn_cancel")]),I("click",b,()=>s(Z,!1)),I("click",_,qe),m(e,r)};A(Qe,e=>{l(Z)&&e(Re)})}j((e,r)=>{n(Se,e),n(Ve,` ${r??""}`)},[()=>d()("dashboard__title"),()=>d()("dashboard__btn_create")]),I("click",_e,()=>s(V,!0)),m(de,xe),lt(),Q()}export{Kt as component};

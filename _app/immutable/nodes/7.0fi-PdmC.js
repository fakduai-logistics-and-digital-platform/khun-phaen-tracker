import{c as Ne,a as p,f}from"../chunks/CPzlj7tX.js";import{i as lt}from"../chunks/B0gZMrfj.js";import{f as D,p as nt,o as dt,t as x,a as vt,i as e,j as n,g as i,s as r,k as t,m as g,G as pt}from"../chunks/BN8yeNaP.js";import{s as o,e as ct}from"../chunks/B7UOL8al.js";import{l as _t,s as ut,i as C,a as mt,b as Pe}from"../chunks/DzUgQEOZ.js";import{I as ft,s as xt,c as Le,$ as gt,a as Ce,r as qe,b as Ae,p as bt}from"../chunks/DwuaTuXd.js";import{p as ht}from"../chunks/B2SCtEzv.js";import{g as Ie}from"../chunks/BjfiAF3u.js";import{b as Me}from"../chunks/BAVAyct3.js";import{f as Se}from"../chunks/BikARds-.js";import{L as wt}from"../chunks/0toGe4MO.js";import{C as De}from"../chunks/BIZmFrJr.js";import{L as Ke}from"../chunks/DK7-E4pp.js";import{A as yt}from"../chunks/DLxmV_E4.js";function kt(K,q){const N=_t(q,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"}],["path",{d:"m9 12 2 2 4-4"}]];ft(K,ut({name:"shield-check"},()=>N,{get iconNode(){return a},children:(A,ie)=>{var u=Ne(),b=D(u);xt(b,q,"default",{}),p(A,u)},$$slots:{default:!0}}))}var $t=f('<div class="text-center animate-fade-in"><div class="w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6"><!></div> <h1 class="text-3xl font-bold text-white mb-4"> </h1> <p class="text-slate-400 mb-8"> </p> <div class="w-full h-1 bg-slate-800 rounded-full overflow-hidden"><div class="h-full bg-green-500 animate-progress svelte-1x3kqci"></div></div></div>'),jt=f('<p class="text-slate-400 text-sm animate-pulse text-primary"> </p>'),zt=f('<p class="text-slate-400 text-sm"> <span class="text-primary font-semibold"> </span></p>'),Pt=f('<p class="text-slate-400 text-sm"> </p>'),Lt=f('<div class="bg-red-500/10 border border-red-500/20 text-red-500 text-sm py-3 px-4 rounded-xl flex items-center gap-2"><svg class="w-4 h-4 shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> </div>'),Ct=f('<div class="w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>'),qt=f(" <!>",1),At=f('<div class="text-center lg:text-left mb-10"><h1 class="text-3xl font-bold text-white mb-3 tracking-tight"> </h1> <!></div> <form class="space-y-5"><div><label for="password" class="block text-sm font-medium text-slate-300 mb-2"> </label> <div class="relative group"><div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-slate-500 group-focus-within:text-primary transition-colors"><!></div> <input type="password" id="password" required minlength="8" placeholder="••••••••" class="w-full pl-11 pr-4 py-3 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:bg-slate-900 focus:ring-2 focus:ring-primary/30 focus:border-primary outline-none transition-all duration-300"/></div></div> <div><label for="confirmPassword" class="block text-sm font-medium text-slate-300 mb-2"> </label> <div class="relative group"><div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-slate-500 group-focus-within:text-primary transition-colors"><!></div> <input type="password" id="confirmPassword" required placeholder="••••••••" class="w-full pl-11 pr-4 py-3 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:bg-slate-900 focus:ring-2 focus:ring-primary/30 focus:border-primary outline-none transition-all duration-300"/></div></div> <!> <button type="submit" class="w-full py-3.5 px-4 mt-2 bg-primary hover:bg-primary-dark disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl shadow-lg shadow-primary/20 transition-all duration-300 flex items-center justify-center gap-2 group border border-transparent"><!></button></form>',1),It=f('<div class="h-screen w-full flex bg-[#030712] overflow-hidden font-sans"><div class="hidden lg:flex w-1/2 relative flex-col justify-between p-12 overflow-hidden bg-[#0A0F1C] border-r border-white/5"><div class="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none"><div class="absolute -top-[20%] -left-[10%] w-[70%] h-[70%] bg-primary/20 rounded-full blur-[120px] mix-blend-screen opacity-50"></div> <div class="absolute bottom-[-10%] right-[-10%] w-[80%] h-[80%] bg-primary/15 rounded-full blur-[120px] mix-blend-screen opacity-50"></div></div> <div class="relative z-10"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-gradient-to-tr from-primary/20 to-primary-dark/10 rounded-xl flex items-center justify-center ring-1 ring-primary/20 shadow-lg shadow-primary/20"><img alt="Khun Phaen Logo" class="w-6 h-6 object-contain"/></div> <span class="text-2xl font-bold text-white tracking-tight"> </span></div></div> <div class="relative z-10 mb-10 pl-4"><h2 class="text-5xl font-extrabold text-white mb-6 leading-[1.15] tracking-tight"> <br/> <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary to-primary-dark"> </span></h2> <p class="text-lg text-slate-400/90 max-w-md leading-relaxed mb-10"> </p> <div class="space-y-4"><div class="flex items-center gap-3 text-slate-300"><!> <span class="font-medium text-sm"> </span></div> <div class="flex items-center gap-3 text-slate-300"><!> <span class="font-medium text-sm"> </span></div></div></div> <div class="relative z-10 flex gap-6 text-sm font-medium text-slate-500"><span> </span></div></div> <div class="w-full lg:w-1/2 flex items-center justify-center p-6 sm:p-12 relative bg-[#030712]"><div class="absolute top-6 right-6 z-50"><!></div> <div class="max-w-[420px] w-full relative z-10"><div class="lg:hidden flex justify-center mb-8"><div class="w-12 h-12 bg-gradient-to-tr from-primary/20 to-primary-dark/10 rounded-2xl flex items-center justify-center ring-1 ring-primary/20 shadow-lg shadow-primary/20"><img alt="Khun Phaen Logo" class="w-7 h-7 object-contain"/></div></div> <!></div></div></div>');function Qt(K,q){nt(q,!1);const N=()=>Pe(ht,"$page",A),a=()=>Pe(gt,"$_",A),[A,ie]=mt();let u=g(""),b=g(""),T=g(""),I=g(!1),c=g(""),oe=g(!1),B=g(""),F=g(!0);dt(async()=>{if(n(u,N().url.searchParams.get("token")||""),!i(u)){n(c,a()("setup__error_no_token")),n(F,!1);return}try{const d=await Ce.auth.getSetupInfo(i(u)),v=await d.json();d.ok?n(B,v.email):(n(c,v.error||a()("setup__error_invalid_token")),setTimeout(()=>{Ie(`${Me}/login`)},3e3))}catch{n(c,a()("setup__error_verify"))}finally{n(F,!1)}});async function Te(){if(i(u)){if(i(b).length<8){n(c,a()("setup__error_min_length"));return}if(i(b)!==i(T)){n(c,a()("setup__error_mismatch"));return}n(I,!0),n(c,"");try{const d=await Ce.auth.setupPassword(i(u),i(b)),v=await d.json();d.ok?(n(oe,!0),setTimeout(()=>{Ie(`${Me}/login`)},3e3)):n(c,v.error||a()("setup__error_default"))}catch{n(c,a()("setup__error_generic"))}finally{n(I,!1)}}}lt();var G=It(),V=e(G),E=r(e(V),2),le=e(E),H=e(le),Be=e(H);t(H);var ne=r(H,2),Fe=e(ne,!0);t(ne),t(le),t(E);var J=r(E,2),O=e(J),de=e(O),ve=r(de,3),Ge=e(ve,!0);t(ve),t(O);var Q=r(O,2),Ve=e(Q,!0);t(Q);var pe=r(Q,2),R=e(pe),ce=e(R);De(ce,{class:"w-5 h-5 text-primary"});var _e=r(ce,2),Ee=e(_e,!0);t(_e),t(R);var ue=r(R,2),me=e(ue);De(me,{class:"w-5 h-5 text-primary"});var fe=r(me,2),He=e(fe,!0);t(fe),t(ue),t(pe),t(J);var xe=r(J,2),ge=e(xe),Je=e(ge,!0);t(ge),t(xe),t(V);var be=r(V,2),U=e(be),Oe=e(U);wt(Oe,{isDark:!0}),t(U);var he=r(U,2),W=e(he),we=e(W),Qe=e(we);t(we),t(W);var Re=r(W,2);{var Ue=d=>{var v=$t(),m=e(v),h=e(m);kt(h,{class:"w-10 h-10 text-green-500"}),t(m);var w=r(m,2),j=e(w,!0);t(w);var k=r(w,2),X=e(k,!0);t(k),pt(2),t(v),x((z,P)=>{o(j,z),o(X,P)},[()=>a()("setup__success_title"),()=>a()("setup__success_desc")]),p(d,v)},We=d=>{var v=At(),m=D(v),h=e(m),w=e(h,!0);t(h);var j=r(h,2);{var k=s=>{var l=jt(),_=e(l,!0);t(l),x(L=>o(_,L),[()=>a()("setup__verifying_token")]),p(s,l)},X=s=>{var l=Ne(),_=D(l);{var L=$=>{var y=zt(),M=e(y),S=r(M),it=e(S,!0);t(S),t(y),x(ot=>{o(M,`${ot??""} `),o(it,i(B))},[()=>a()("setup__setting_up_for")]),p($,y)},se=$=>{var y=Pt(),M=e(y,!0);t(y),x(S=>o(M,S),[()=>a()("setup__default_subtitle")]),p($,y)};C(_,$=>{i(B)?$(L):$(se,!1)},!0)}p(s,l)};C(j,s=>{i(F)?s(k):s(X,!1)})}t(m);var z=r(m,2),P=e(z),Y=e(P),Xe=e(Y,!0);t(Y);var ye=r(Y,2),Z=e(ye),Ye=e(Z);Ke(Ye,{size:18}),t(Z);var ke=r(Z,2);qe(ke),t(ye),t(P);var ee=r(P,2),te=e(ee),Ze=e(te,!0);t(te);var $e=r(te,2),re=e($e),et=e(re);Ke(et,{size:18}),t(re);var je=r(re,2);qe(je),t($e),t(ee);var ze=r(ee,2);{var tt=s=>{var l=Lt(),_=r(e(l));t(l),x(()=>o(_,` ${i(c)??""}`)),p(s,l)};C(ze,s=>{i(c)&&s(tt)})}var ae=r(ze,2),rt=e(ae);{var at=s=>{var l=Ct();p(s,l)},st=s=>{var l=qt(),_=D(l),L=r(_);yt(L,{size:18,class:"group-hover:translate-x-1 transition-transform"}),x(se=>o(_,`${se??""} `),[()=>a()("setup__btn_submit")]),p(s,l)};C(rt,s=>{i(I)?s(at):s(st,!1)})}t(ae),t(z),x((s,l,_)=>{o(w,s),o(Xe,l),o(Ze,_),ae.disabled=i(I)||!i(u)},[()=>a()("setup__title"),()=>a()("setup__new_password_label"),()=>a()("setup__confirm_password_label")]),Ae(ke,()=>i(b),s=>n(b,s)),Ae(je,()=>i(T),s=>n(T,s)),ct("submit",z,bt(Te)),p(d,v)};C(Re,d=>{i(oe)?d(Ue):d(We,!1)})}t(he),t(be),t(G),x((d,v,m,h,w,j,k)=>{Le(Be,"src",Se),o(Fe,d),o(de,`${v??""} `),o(Ge,m),o(Ve,h),o(Ee,w),o(He,j),o(Je,k),Le(Qe,"src",Se)},[()=>a()("setup__brand_name"),()=>a()("setup__hero_title_1"),()=>a()("setup__hero_title_2"),()=>a()("setup__hero_desc"),()=>a()("setup__value_prop_1"),()=>a()("setup__value_prop_2"),()=>a()("setup__footer_text")]),p(K,G),vt(),ie()}export{Qt as component};

import{c as ge,a as g,f,t as Lr}from"../chunks/CPzlj7tX.js";import{i as na}from"../chunks/B0gZMrfj.js";import{f as W,p as la,o as va,l as ct,d as ca,t as w,g as t,a as ga,i as e,s,u as o,j as n,m as j,k as r,n as re,G as _a}from"../chunks/BN8yeNaP.js";import{e as L,s as d}from"../chunks/B7UOL8al.js";import{l as Ar,s as Fr,i as U,a as pa,b as gt}from"../chunks/DzUgQEOZ.js";import{I as Ir,s as Sr,b as oe,c as _t,$ as xa,r as te,a as Ke,e as pt,i as xt,m as ua,g as ba,d as $e,p as fa,n as ya,f as ma}from"../chunks/DwuaTuXd.js";import{S as ha,b as ka,E as wa,C as $a}from"../chunks/CbciS1nE.js";import{b as Mr}from"../chunks/BAVAyct3.js";import{u as za}from"../chunks/B9P73xU4.js";import{U as ja,P as ut,X as Ua}from"../chunks/C6EWQ42Q.js";import{T as bt}from"../chunks/CYgE8SeJ.js";import{U as Pr}from"../chunks/BuM6R9IG.js";import{S as ft}from"../chunks/BiyaYWhP.js";import{M as Tr}from"../chunks/BRHvNHB7.js";import{T as Ca,B as Da}from"../chunks/BVYvbHb5.js";import{C as Er}from"../chunks/BIZmFrJr.js";import{A as La}from"../chunks/DLxmV_E4.js";function Ma(de,X){const a=Ar(X,["children","$$slots","$$events","$$legacy"]);const ne=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m15 9-6 6"}],["path",{d:"m9 9 6 6"}]];Ir(de,Fr({name:"circle-x"},()=>a,{get iconNode(){return ne},children:(ae,Se)=>{var S=ge(),N=W(S);Sr(N,X,"default",{}),g(ae,S)},$$slots:{default:!0}}))}function Nr(de,X){const a=Ar(X,["children","$$slots","$$events","$$legacy"]);const ne=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor"}]];Ir(de,Fr({name:"key-round"},()=>a,{get iconNode(){return ne},children:(ae,Se)=>{var S=ge(),N=W(S);Sr(N,X,"default",{}),g(ae,S)},$$slots:{default:!0}}))}function yt(de,X){const a=Ar(X,["children","$$slots","$$events","$$legacy"]);const ne=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["circle",{cx:"9",cy:"7",r:"4"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11"}]];Ir(de,Fr({name:"user-plus"},()=>a,{get iconNode(){return ne},children:(ae,Se)=>{var S=ge(),N=W(S);Sr(N,X,"default",{}),g(ae,S)},$$slots:{default:!0}}))}var Pa=f('<tr class="animate-pulse"><td class="px-6 py-4"><div class="h-10 w-48 bg-gray-200 dark:bg-gray-700 rounded"></div></td><td class="px-6 py-4"><div class="h-6 w-16 bg-gray-200 dark:bg-gray-700 rounded"></div></td><td class="px-6 py-4"><div class="h-6 w-20 bg-gray-200 dark:bg-gray-700 rounded"></div></td><td class="px-6 py-4"><div class="h-6 w-24 bg-gray-200 dark:bg-gray-700 rounded"></div></td><td class="px-6 py-4"><div class="h-8 w-8 bg-gray-200 dark:bg-gray-700 rounded float-right"></div></td></tr>'),Ta=f('<tr><td colspan="5" class="px-6 py-12 text-center text-red-500 font-medium"> </td></tr>'),Ea=f('<tr><td colspan="5" class="px-6 py-12 text-center text-gray-500 dark:text-gray-400">No users found matching your search.</td></tr>'),Na=f('<span class="text-xs font-normal text-gray-500 dark:text-gray-400 ml-1"> </span>'),Aa=f('<div class="text-[10px] text-indigo-500 font-medium flex items-center gap-1"><div class="w-2.5 h-2.5 rounded-full bg-indigo-500/20 flex items-center justify-center text-[6px] font-bold text-indigo-500">D</div> </div>'),Fa=f('<span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 text-[10px] font-bold uppercase tracking-wider border border-purple-200 dark:border-purple-800"><!> </span>'),Ia=f('<span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 text-[10px] font-bold uppercase tracking-wider border border-gray-200 dark:border-gray-600"><!> </span>'),Sa=f('<span class="inline-flex items-center gap-1 text-green-500 text-xs font-medium"><!> </span>'),qa=f('<span class="inline-flex items-center gap-1 text-amber-500 text-xs font-medium"><!> </span>'),Ba=f('<tr class="hover:bg-gray-50 dark:hover:bg-white/5 transition-colors group"><td class="px-6 py-4"><div class="flex items-center gap-3"><div class="relative"><div class="w-9 h-9 rounded-full border-2 border-indigo-500 bg-white dark:bg-gray-800 flex items-center justify-center overflow-hidden transition-colors"><span class="text-xs font-black text-indigo-600 dark:text-indigo-400 uppercase tracking-tighter"> </span></div> <div class="absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 bg-white dark:bg-gray-800 rounded-full flex items-center justify-center"><div></div></div></div> <div><div class="text-sm font-semibold text-gray-900 dark:text-white"> <!></div> <div class="text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1"><!> </div> <!></div></div></td><td class="px-6 py-4"><!></td><td class="px-6 py-4"><!></td><td class="px-6 py-4 text-xs text-gray-500 dark:text-gray-400"> </td><td class="px-6 py-4 text-right"><button class="p-2 text-gray-400 hover:text-gray-600 dark:hover:text-white transition-colors"><!></button></td></tr>'),Ja=f('<button class="flex items-center gap-2 px-4 py-2.5 text-xs font-semibold text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors"><!> </button>'),Oa=f('<div class="fixed flex flex-col min-w-[160px] bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-2xl z-[2000] py-1 animate-zoom-in svelte-1gtvb1r"><!> <button class="flex items-center gap-2 px-4 py-2.5 text-xs font-semibold text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors"><!> </button> <div class="h-px bg-gray-100 dark:bg-gray-700 my-1"></div> <button class="flex items-center gap-2 px-4 py-2.5 text-xs font-semibold text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 transition-colors"><!> </button></div>'),Ra=f('<div class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>'),Xa=f('<div class="fixed inset-0 z-[1100] flex items-center justify-center p-4"><div class="absolute inset-0 bg-gray-900/60 backdrop-blur-sm"></div> <div class="relative w-full max-w-sm bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 p-6 animate-zoom-in svelte-1gtvb1r"><div class="flex flex-col items-center text-center"><div class="w-16 h-16 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center text-red-500 mb-4 ring-8 ring-red-50 dark:ring-red-900/10"><!></div> <h3 class="text-lg font-bold text-gray-900 dark:text-white"> </h3> <p class="text-sm text-gray-500 dark:text-gray-400 mt-2"> </p></div> <div class="grid grid-cols-2 gap-3 mt-8"><button class="px-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-700 text-sm font-bold text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors"> </button> <button class="px-4 py-2.5 rounded-xl bg-red-500 hover:bg-red-600 text-white text-sm font-bold shadow-lg shadow-red-500/20 transition-all flex items-center justify-center gap-2"><!></button></div></div></div>'),Ga=f("<!> Update User",1),Ha=f("<!> ",1),Ka=f('<div class="flex p-1 bg-gray-100 dark:bg-gray-950 rounded-xl mb-4"><button type="button"><span class="flex items-center justify-center gap-2"><!> </span></button> <button type="button"><span class="flex items-center justify-center gap-2"><!> </span></button></div>'),Qa=f('<div class="animate-fade-in svelte-1gtvb1r"><label for="password" class="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1.5"> </label> <div class="relative"><div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-gray-400"><!></div> <input type="password" id="password" class="w-full pl-11 pr-4 py-2.5 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all"/></div></div>'),Va=f('<div class="bg-red-500/10 border border-red-500/20 text-red-500 text-sm py-3 px-4 rounded-xl flex items-center gap-2 animate-fade-in svelte-1gtvb1r"><!> </div>'),Ya=f('<div class="bg-indigo-500/10 border border-indigo-500/20 p-4 rounded-xl animate-fade-in space-y-3 svelte-1gtvb1r"><div class="flex items-center gap-2 text-indigo-500 dark:text-indigo-400 text-sm font-bold border-b border-indigo-500/20 pb-2"><!> </div> <p class="text-xs text-gray-500 dark:text-gray-400"> </p> <div class="flex gap-2"><input readonly="" class="flex-1 bg-white dark:bg-gray-950 border border-gray-200 dark:border-gray-800 rounded-lg py-1.5 px-3 text-xs text-indigo-600 dark:text-indigo-300 outline-none font-mono"/> <button type="button" class="bg-indigo-600 hover:bg-indigo-500 text-white px-3 py-1.5 rounded-lg text-xs font-medium transition-colors"> </button></div></div>'),Wa=f('<div class="w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>'),Za=f("<!> <!>",1),es=f('<div class="fixed inset-0 z-1000 flex items-center justify-center p-4 sm:p-6"><div class="absolute inset-0 bg-gray-900/60 backdrop-blur-sm animate-fade-in-quick svelte-1gtvb1r"></div> <div class="relative w-full max-w-lg bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden animate-zoom-in svelte-1gtvb1r"><div class="flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"><div><h2 class="text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2"><!></h2> <p class="text-sm text-gray-500 dark:text-gray-400 mt-1"> </p></div> <button class="p-2 text-gray-400 hover:text-gray-600 dark:hover:text-white rounded-lg transition-colors"><!></button></div> <div class="p-6 max-h-[70vh] overflow-y-auto"><form class="space-y-4"><div class="grid grid-cols-2 gap-3 mb-2"><button type="button"><!> <span class="text-xs"> </span></button> <button type="button"><!> <span class="text-xs"> </span></button></div> <!> <div><label for="email" class="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1.5"> </label> <div class="relative"><div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-gray-400"><!></div> <input type="email" id="email" required placeholder="colleague@example.com"/></div></div> <!> <div class="grid grid-cols-2 gap-4"><div><label for="first_name" class="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1.5"> </label> <div class="relative"><div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-gray-400"><!></div> <input id="first_name" placeholder="John" class="w-full pl-11 pr-4 py-2.5 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all"/></div></div> <div><label for="last_name" class="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1.5"> </label> <input id="last_name" placeholder="Doe" class="w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all"/></div></div> <div class="grid grid-cols-2 gap-4"><div><label for="nickname" class="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1.5"> </label> <div class="relative"><div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-gray-400"><!></div> <input id="nickname" placeholder="Johnny" class="w-full pl-11 pr-4 py-2.5 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all"/></div></div> <div><label for="position" class="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1.5"> </label> <div class="relative"><div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-gray-400"><!></div> <input id="position" placeholder="Developer" class="w-full pl-11 pr-4 py-2.5 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all"/></div></div></div> <div><label for="discord_id" class="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1.5"> </label> <div class="relative"><div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-gray-400"><div class="w-4 h-4 rounded-full bg-indigo-500/20 flex items-center justify-center text-[8px] font-bold text-indigo-500">D</div></div> <input id="discord_id" placeholder="123456789012345678" class="w-full pl-11 pr-4 py-2.5 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all"/></div></div> <!> <!> <div class="flex gap-3 pt-2"><button type="button" class="flex-1 px-4 py-3 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 font-bold rounded-xl hover:bg-gray-50 dark:hover:bg-white/5 transition-colors"> </button> <button type="submit" class="flex-[2] py-3 px-4 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl shadow-lg shadow-indigo-600/20 transition-all flex items-center justify-center gap-2 group"><!></button></div></form></div></div></div>'),rs=f('<div class="fixed bottom-8 right-8 z-[2000] animate-zoom-in svelte-1gtvb1r"><div class="bg-success text-white px-6 py-3 rounded-xl shadow-xl flex items-center gap-3 ring-1 ring-black/5 dark:ring-white/5"><div class="flex items-center justify-center bg-white/20 rounded-full w-8 h-8 backdrop-blur-md"><!></div> <span class="text-sm font-bold tracking-wide"> </span></div></div>'),ts=f('<div class="space-y-6 animate-fade-in svelte-1gtvb1r"><div class="flex flex-col md:flex-row md:items-center justify-between gap-4"><div><h1 class="text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2"><!> </h1> <p class="text-sm text-gray-500 dark:text-gray-400 mt-1"> </p></div> <button class="inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg text-sm font-semibold transition-all shadow-lg shadow-indigo-600/20"><!> </button></div> <div class="grid grid-cols-1 sm:grid-cols-3 gap-4"><div class="bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm"><span class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"> </span> <div class="text-2xl font-bold text-gray-900 dark:text-white mt-1"> </div></div> <div class="bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm"><span class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"> </span> <div class="text-2xl font-bold text-green-500 mt-1"> </div></div> <div class="bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm"><span class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"> </span> <div class="text-2xl font-bold text-amber-500 mt-1"> </div></div></div> <div class="relative"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400"><!></div> <input type="text" class="w-full pl-10 pr-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all dark:text-white"/></div> <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl overflow-hidden shadow-sm"><div class="overflow-x-auto"><table class="w-full text-left border-collapse"><thead class="bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700"><tr><th class="px-6 py-4 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"> </th><th class="px-6 py-4 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"> </th><th class="px-6 py-4 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"> </th><th class="px-6 py-4 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"> </th><th class="px-6 py-4 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider text-right"> </th></tr></thead><tbody class="divide-y divide-gray-200 dark:divide-gray-700"><!></tbody></table></div></div> <!> <!> <!> <!></div>');function ms(de,X){la(X,!1);const a=()=>gt(xa,"$_",ae),ne=()=>gt(za,"$user",ae),[ae,Se]=pa(),S=j();let N=j([]),Qe=j(!0),_e=j(""),pe=j(""),xe=j(!1),ze=j(!1),le=j(""),ue=j(""),Q=j("invite"),_=j({email:"",password:"",role:"user",first_name:"",last_name:"",nickname:"",position:"",discord_id:""});async function Ve(){n(Qe,!0);try{const i=await Ke.auth.listUsers(),v=await i.json();i.ok?n(N,v.users):n(_e,v.error||"Failed to fetch users")}catch{n(_e,"Failed to fetch users")}finally{n(Qe,!1)}}async function mt(){n(ze,!0),n(le,""),n(ue,"");try{const i={...t(_)};if(t(Q)==="invite")delete i.password;else if(!i.password&&!t(D)){n(le,"Password is required"),n(ze,!1);return}t(D)&&!i.password&&delete i.password;const v=t(D)?await Ke.auth.updateUser(t(D).id,i):await Ke.auth.invite(i),m=await v.json();v.ok?(m.setup_link?n(ue,window.location.origin+Mr+m.setup_link):qe(),Ve()):n(le,m.error||"User operation failed")}catch{n(le,"User operation failed")}finally{n(ze,!1)}}function qe(){n(_,{email:"",password:"",role:"user",first_name:"",last_name:"",nickname:"",position:"",discord_id:""}),n(Q,"invite"),n(le,""),n(ue,""),n(xe,!1),n(D,null)}let se=j(null),je=j(!1),be=j(null),Be=j(!1),D=j(null),ie=j(null),Ue=j({top:0,left:0}),Ye=j(!1),qr=j("");function ht(i,v){if(v.stopPropagation(),t(se)===i.id)n(se,null),n(ie,null);else{n(se,i.id),n(ie,i);const h=v.currentTarget.getBoundingClientRect();n(Ue,{top:h.bottom+window.scrollY,left:h.right+window.scrollX-160})}}function kt(i){const v=`${window.location.origin}${Mr}/setup-password?token=${i}`;navigator.clipboard.writeText(v),n(qr,a()("users__copy_success")),n(Ye,!0),setTimeout(()=>n(Ye,!1),3e3),n(se,null)}async function wt(i){n(be,i),n(je,!0),n(se,null)}async function $t(){if(t(be)){n(Be,!0);try{const i=await Ke.auth.deleteUser(t(be).id);if(i.ok)Ve(),n(je,!1),n(be,null);else{const v=await i.json();n(_e,v.error||"Failed to delete user")}}catch{n(_e,"Failed to delete user")}finally{n(Be,!1)}}}function zt(i){n(D,i),n(_,{email:i.email,password:"",role:i.role,first_name:i.profile?.first_name||"",last_name:i.profile?.last_name||"",nickname:i.profile?.nickname||"",position:i.profile?.position||"",discord_id:i.discord_id||""}),n(Q,"invite"),n(xe,!0),n(se,null)}va(()=>{if(ne()?.role!=="admin"){window.location.href=`${Mr}/dashboard`;return}Ve();const i=()=>n(se,null);return window.addEventListener("click",i),()=>window.removeEventListener("click",i)});function jt(i){return new Date(i).toLocaleDateString()}ct(()=>(t(N),t(pe)),()=>{n(S,t(N).filter(i=>i.email.toLowerCase().includes(t(pe).toLowerCase())||(i.profile?.first_name||"").toLowerCase().includes(t(pe).toLowerCase())||(i.profile?.nickname||"").toLowerCase().includes(t(pe).toLowerCase())))}),ct(()=>t(xe),()=>{t(xe)?document.body.style.overflow="hidden":document.body.style.overflow="auto"}),ca(),na();var We=ts(),Ze=e(We),er=e(Ze),rr=e(er),Br=e(rr);ja(Br,{class:"text-indigo-500"});var Ut=s(Br);r(rr);var Jr=s(rr,2),Ct=e(Jr,!0);r(Jr),r(er);var tr=s(er,2),Or=e(tr);yt(Or,{size:18});var Dt=s(Or);r(tr),r(Ze);var ar=s(Ze,2),sr=e(ar),ir=e(sr),Lt=e(ir,!0);r(ir);var Rr=s(ir,2),Mt=e(Rr,!0);r(Rr),r(sr);var or=s(sr,2),dr=e(or),Pt=e(dr,!0);r(dr);var Xr=s(dr,2),Tt=e(Xr,!0);r(Xr),r(or);var Gr=s(or,2),nr=e(Gr),Et=e(nr,!0);r(nr);var Hr=s(nr,2),Nt=e(Hr,!0);r(Hr),r(Gr),r(ar);var lr=s(ar,2),vr=e(lr),At=e(vr);ha(At,{size:18}),r(vr);var cr=s(vr,2);te(cr),r(lr);var gr=s(lr,2),Kr=e(gr),Qr=e(Kr),_r=e(Qr),Vr=e(_r),pr=e(Vr),Ft=e(pr,!0);r(pr);var xr=s(pr),It=e(xr,!0);r(xr);var ur=s(xr),St=e(ur,!0);r(ur);var br=s(ur),qt=e(br,!0);r(br);var Yr=s(br),Bt=e(Yr,!0);r(Yr),r(Vr),r(_r);var Wr=s(_r),Jt=e(Wr);{var Ot=i=>{var v=ge(),m=W(v);pt(m,0,()=>Array(3),xt,(h,C)=>{var y=Pa();g(h,y)}),g(i,v)},Rt=i=>{var v=ge(),m=W(v);{var h=y=>{var T=Ta(),E=e(T),O=e(E,!0);r(E),r(T),w(()=>d(O,t(_e))),g(y,T)},C=y=>{var T=ge(),E=W(T);{var O=$=>{var z=Ea();g($,z)},G=$=>{var z=ge(),q=W(z);pt(q,1,()=>t(S),xt,(V,c)=>{var Z=Ba(),H=e(Z),ve=e(H),A=e(ve),R=e(A),K=e(R),Je=e(K,!0);r(K),r(R);var Ce=s(R,2),fr=e(Ce);r(Ce),r(A);var De=s(A,2),Le=e(De),fe=e(Le),Me=s(fe);{var yr=p=>{var x=Na(),k=e(x);r(x),w(()=>d(k,`(${t(c),o(()=>t(c).profile.nickname)??""})`)),g(p,x)};U(Me,p=>{t(c),o(()=>t(c).profile?.nickname)&&p(yr)})}r(Le);var ye=s(Le,2),me=e(ye);Tr(me,{size:12});var mr=s(me);r(ye);var he=s(ye,2);{var Oe=p=>{var x=Aa(),k=s(e(x));r(x),w(()=>d(k,` ${t(c),o(()=>t(c).discord_id)??""}`)),g(p,x)};U(he,p=>{t(c),o(()=>t(c).discord_id)&&p(Oe)})}r(De),r(ve),r(H);var Pe=s(H),Te=e(Pe);{var Ee=p=>{var x=Fa(),k=e(x);ft(k,{size:10});var ee=s(k);r(x),w(Y=>d(ee,` ${Y??""}`),[()=>(a(),o(()=>a()("users__role_admin")))]),g(p,x)},Ne=p=>{var x=Ia(),k=e(x);Pr(k,{size:10});var ee=s(k);r(x),w(Y=>d(ee,` ${Y??""}`),[()=>(a(),o(()=>a()("users__role_user")))]),g(p,x)};U(Te,p=>{t(c),o(()=>t(c).role==="admin")?p(Ee):p(Ne,!1)})}r(Pe);var Ae=s(Pe),Re=e(Ae);{var Fe=p=>{var x=Sa(),k=e(x);Er(k,{size:14});var ee=s(k);r(x),w(Y=>d(ee,` ${Y??""}`),[()=>(a(),o(()=>a()("users__status_active")))]),g(p,x)},hr=p=>{var x=qa(),k=e(x);$a(k,{size:14});var ee=s(k);r(x),w(Y=>d(ee,` ${Y??""}`),[()=>(a(),o(()=>a()("users__status_pending")))]),g(p,x)};U(Re,p=>{t(c),o(()=>t(c).is_active)?p(Fe):p(hr,!1)})}r(Ae);var ke=s(Ae),Xe=e(ke,!0);r(ke);var we=s(ke),Ie=e(we),Ge=e(Ie);wa(Ge,{size:18}),r(Ie),r(we),r(Z),w((p,x,k)=>{d(Je,p),$e(fr,1,`w-2 h-2 rounded-full ${t(c),o(()=>t(c).is_active?"bg-green-500":"bg-amber-400")??""}`),d(fe,`${x??""} `),d(mr,` ${t(c),o(()=>t(c).email)??""}`),d(Xe,k)},[()=>(t(c),o(()=>(t(c).profile?.nickname||t(c).email.split("@")[0])[0])),()=>(t(c),a(),o(()=>t(c).profile?.first_name||t(c).profile?.last_name?`${t(c).profile.first_name||""} ${t(c).profile.last_name||""}`.trim():a()("users__anonymous"))),()=>(t(c),o(()=>jt(t(c).created_at)))]),L("click",Ie,p=>ht(t(c),p)),g(V,Z)}),g($,z)};U(E,$=>{t(S),o(()=>t(S).length===0)?$(O):$(G,!1)},!0)}g(y,T)};U(m,y=>{t(_e)?y(h):y(C,!1)},!0)}g(i,v)};U(Jt,i=>{t(Qe)?i(Ot):i(Rt,!1)})}r(Wr),r(Qr),r(Kr),r(gr);var Zr=s(gr,2);{var Xt=i=>{var v=Oa(),m=e(v);{var h=$=>{var z=Ja(),q=e(z);Nr(q,{size:14,class:"text-indigo-500"});var V=s(q);r(z),w(c=>d(V,` ${c??""}`),[()=>(a(),o(()=>a()("users__action_copy_setup")))]),L("click",z,()=>kt(t(ie).setup_token)),g($,z)};U(m,$=>{t(ie),o(()=>!t(ie).is_active)&&$(h)})}var C=s(m,2),y=e(C);ut(y,{size:14,class:"text-blue-500"});var T=s(y);r(C);var E=s(C,4),O=e(E);bt(O,{size:14});var G=s(O);r(E),r(v),w(($,z)=>{ua(v,`top: ${t(Ue),o(()=>t(Ue).top)??""}px; left: ${t(Ue),o(()=>t(Ue).left)??""}px;`),d(T,` ${$??""}`),d(G,` ${z??""}`)},[()=>(a(),o(()=>a()("users__action_edit"))),()=>(a(),o(()=>a()("users__action_delete")))]),L("click",C,()=>zt(t(ie))),L("click",E,()=>wt(t(ie))),L("click",v,ba(function($){ka.call(this,X,$)})),g(i,v)};U(Zr,i=>{t(se)&&t(ie)&&i(Xt)})}var et=s(Zr,2);{var Gt=i=>{var v=Xa(),m=e(v),h=s(m,2),C=e(h),y=e(C),T=e(y);bt(T,{size:32}),r(y);var E=s(y,2),O=e(E,!0);r(E);var G=s(E,2),$=e(G,!0);r(G),r(C);var z=s(C,2),q=e(z),V=e(q,!0);r(q);var c=s(q,2),Z=e(c);{var H=A=>{var R=Ra();g(A,R)},ve=A=>{var R=Lr();w(K=>d(R,K),[()=>(a(),o(()=>a()("users__btn_confirm_delete")))]),g(A,R)};U(Z,A=>{t(Be)?A(H):A(ve,!1)})}r(c),r(z),r(h),r(v),w((A,R,K)=>{d(O,A),d($,R),d(V,K),c.disabled=t(Be)},[()=>(a(),o(()=>a()("users__delete_title"))),()=>(a(),t(be),o(()=>a()("users__delete_confirm_text",{values:{email:t(be)?.email}}))),()=>(a(),o(()=>a()("users__btn_cancel")))]),L("click",m,()=>n(je,!1)),L("click",q,()=>n(je,!1)),L("click",c,$t),g(i,v)};U(et,i=>{t(je)&&i(Gt)})}var rt=s(et,2);{var Ht=i=>{var v=es(),m=s(e(v),2),h=e(m),C=e(h),y=e(C),T=e(y);{var E=l=>{var u=Ga(),b=W(u);ut(b,{class:"text-indigo-500",size:24}),_a(),g(l,u)},O=l=>{var u=Ha(),b=W(u);yt(b,{class:"text-indigo-500",size:24});var F=s(b);w(B=>d(F,` ${B??""}`),[()=>(a(),o(()=>a()("users__modal_title")))]),g(l,u)};U(T,l=>{t(D)?l(E):l(O,!1)})}r(y);var G=s(y,2),$=e(G,!0);r(G),r(C);var z=s(C,2),q=e(z);Ua(q,{size:24}),r(z),r(h);var V=s(h,2),c=e(V),Z=e(c),H=e(Z),ve=e(H);Pr(ve,{size:14});var A=s(ve,2),R=e(A,!0);r(A),r(H);var K=s(H,2),Je=e(K);ft(Je,{size:14});var Ce=s(Je,2),fr=e(Ce,!0);r(Ce),r(K),r(Z);var De=s(Z,2);{var Le=l=>{var u=Ka(),b=e(u),F=e(b),B=e(F);Tr(B,{size:14});var J=s(B);r(F),r(b);var M=s(b,2),P=e(M),I=e(P);Nr(I,{size:14});var ce=s(I);r(P),r(M),r(u),w((Cr,Dr)=>{$e(b,1,`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${t(Q)==="invite"?"bg-white dark:bg-gray-800 shadow-sm text-indigo-600 dark:text-indigo-400":"text-gray-500"}`),d(J,` ${Cr??""}`),$e(M,1,`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${t(Q)==="password"?"bg-white dark:bg-gray-800 shadow-sm text-indigo-600 dark:text-indigo-400":"text-gray-500"}`),d(ce,` ${Dr??""}`)},[()=>(a(),o(()=>a()("users__mode_invite"))),()=>(a(),o(()=>a()("users__mode_password")))]),L("click",b,()=>n(Q,"invite")),L("click",M,()=>n(Q,"password")),g(l,u)};U(De,l=>{t(D)||l(Le)})}var fe=s(De,2),Me=e(fe),yr=e(Me,!0);r(Me);var ye=s(Me,2),me=e(ye),mr=e(me);Tr(mr,{size:16}),r(me);var he=s(me,2);te(he),r(ye),r(fe);var Oe=s(fe,2);{var Pe=l=>{var u=Qa(),b=e(u),F=e(b,!0);r(b);var B=s(b,2),J=e(B),M=e(J);Nr(M,{size:16}),r(J);var P=s(J,2);te(P),r(B),r(u),w(I=>{d(F,I),P.required=!t(D),_t(P,"placeholder",t(D)?"Leave blank to keep current":"••••••••")},[()=>(t(D),a(),o(()=>t(D)?"Reset Password (optional)":a()("users__form_password")))]),oe(P,()=>t(_).password,I=>re(_,t(_).password=I)),g(l,u)};U(Oe,l=>{(t(Q)==="password"||t(D))&&l(Pe)})}var Te=s(Oe,2),Ee=e(Te),Ne=e(Ee),Ae=e(Ne,!0);r(Ne);var Re=s(Ne,2),Fe=e(Re),hr=e(Fe);Pr(hr,{size:16}),r(Fe);var ke=s(Fe,2);te(ke),r(Re),r(Ee);var Xe=s(Ee,2),we=e(Xe),Ie=e(we,!0);r(we);var Ge=s(we,2);te(Ge),r(Xe),r(Te);var p=s(Te,2),x=e(p),k=e(x),ee=e(k,!0);r(k);var Y=s(k,2),kr=e(Y),Vt=e(kr);Ca(Vt,{size:16}),r(kr);var tt=s(kr,2);te(tt),r(Y),r(x);var at=s(x,2),wr=e(at),Yt=e(wr,!0);r(wr);var st=s(wr,2),$r=e(st),Wt=e($r);Da(Wt,{size:16}),r($r);var it=s($r,2);te(it),r(st),r(at),r(p);var zr=s(p,2),jr=e(zr),Zt=e(jr,!0);r(jr);var ot=s(jr,2),dt=s(e(ot),2);te(dt),r(ot),r(zr);var nt=s(zr,2);{var ea=l=>{var u=Va(),b=e(u);Ma(b,{size:16});var F=s(b);r(u),w(()=>d(F,` ${t(le)??""}`)),g(l,u)};U(nt,l=>{t(le)&&l(ea)})}var lt=s(nt,2);{var ra=l=>{var u=Ya(),b=e(u),F=e(b);Er(F,{size:16});var B=s(F);r(b);var J=s(b,2),M=e(J,!0);r(J);var P=s(J,2),I=e(P);te(I);var ce=s(I,2),Cr=e(ce,!0);r(ce),r(P),r(u),w((Dr,oa,da)=>{d(B,` ${Dr??""}`),d(M,oa),ma(I,t(ue)),d(Cr,da)},[()=>(a(),o(()=>a()("users__invite_link_generated"))),()=>(a(),o(()=>a()("users__copy_link_hint"))),()=>(a(),o(()=>a()("users__btn_copy")))]),L("click",ce,()=>{navigator.clipboard.writeText(t(ue))}),g(l,u)};U(lt,l=>{t(ue)&&l(ra)})}var vt=s(lt,2),He=e(vt),ta=e(He,!0);r(He);var Ur=s(He,2),aa=e(Ur);{var sa=l=>{var u=Wa();g(l,u)},ia=l=>{var u=Za(),b=W(u);{var F=M=>{var P=Lr("Update Profile");g(M,P)},B=M=>{var P=Lr();w(I=>d(P,I),[()=>(t(Q),a(),o(()=>t(Q)==="invite"?a()("users__btn_create_invite"):a()("users__btn_create_user")))]),g(M,P)};U(b,M=>{t(D)?M(F):M(B,!1)})}var J=s(b,2);La(J,{size:18,class:"group-hover:translate-x-1 transition-transform"}),g(l,u)};U(aa,l=>{t(ze)?l(sa):l(ia,!1)})}r(Ur),r(vt),r(c),r(V),r(m),r(v),w((l,u,b,F,B,J,M,P,I,ce)=>{d($,l),$e(H,1,`flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl border transition-all ${t(_),o(()=>t(_).role==="user"?"bg-indigo-500/10 border-indigo-500 text-indigo-500 font-bold":"bg-gray-50 dark:bg-gray-900/50 border-gray-200 dark:border-gray-700 text-gray-500 hover:border-gray-300")??""}`),d(R,u),$e(K,1,`flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl border transition-all ${t(_),o(()=>t(_).role==="admin"?"bg-purple-500/10 border-purple-500 text-purple-500 font-bold":"bg-gray-50 dark:bg-gray-900/50 border-gray-200 dark:border-gray-700 text-gray-500 hover:border-gray-300")??""}`),d(fr,b),d(yr,F),he.readOnly=!!t(D),$e(he,1,`w-full pl-11 pr-4 py-2.5 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all ${t(D)?"opacity-60 cursor-not-allowed":""}`),d(Ae,B),d(Ie,J),d(ee,M),d(Yt,P),d(Zt,I),d(ta,ce),Ur.disabled=t(ze)},[()=>(t(D),a(),o(()=>t(D)?"Edit user profile information":a()("users__modal_subtitle"))),()=>(a(),o(()=>a()("users__role_user"))),()=>(a(),o(()=>a()("users__role_admin"))),()=>(a(),o(()=>a()("users__form_email"))),()=>(a(),o(()=>a()("users__form_first_name"))),()=>(a(),o(()=>a()("users__form_last_name"))),()=>(a(),o(()=>a()("users__form_nickname"))),()=>(a(),o(()=>a()("users__form_position"))),()=>(a(),o(()=>a()("users__form_discord_id"))),()=>(a(),o(()=>a()("users__btn_cancel")))]),L("click",z,qe),L("click",H,()=>re(_,t(_).role="user")),L("click",K,()=>re(_,t(_).role="admin")),oe(he,()=>t(_).email,l=>re(_,t(_).email=l)),oe(ke,()=>t(_).first_name,l=>re(_,t(_).first_name=l)),oe(Ge,()=>t(_).last_name,l=>re(_,t(_).last_name=l)),oe(tt,()=>t(_).nickname,l=>re(_,t(_).nickname=l)),oe(it,()=>t(_).position,l=>re(_,t(_).position=l)),oe(dt,()=>t(_).discord_id,l=>re(_,t(_).discord_id=l)),L("click",He,qe),L("submit",c,fa(mt)),L("click",v,ya(qe)),g(i,v)};U(rt,i=>{t(xe)&&i(Ht)})}var Kt=s(rt,2);{var Qt=i=>{var v=rs(),m=e(v),h=e(m),C=e(h);Er(C,{size:18}),r(h);var y=s(h,2),T=e(y,!0);r(y),r(m),r(v),w(()=>d(T,t(qr))),g(i,v)};U(Kt,i=>{t(Ye)&&i(Qt)})}r(We),w((i,v,m,h,C,y,T,E,O,G,$,z,q,V)=>{d(Ut,` ${i??""}`),d(Ct,v),d(Dt,` ${m??""}`),d(Lt,h),d(Mt,(t(N),o(()=>t(N).length))),d(Pt,C),d(Tt,y),d(Et,T),d(Nt,E),_t(cr,"placeholder",O),d(Ft,G),d(It,$),d(St,z),d(qt,q),d(Bt,V)},[()=>(a(),o(()=>a()("users__title"))),()=>(a(),o(()=>a()("users__subtitle"))),()=>(a(),o(()=>a()("users__btn_add"))),()=>(a(),o(()=>a()("users__total_users"))),()=>(a(),o(()=>a()("users__active"))),()=>(t(N),o(()=>t(N).filter(i=>i.is_active).length)),()=>(a(),o(()=>a()("users__pending"))),()=>(t(N),o(()=>t(N).filter(i=>!i.is_active).length)),()=>(a(),o(()=>a()("users__search_placeholder"))),()=>(a(),o(()=>a()("users__table_user"))),()=>(a(),o(()=>a()("users__table_role"))),()=>(a(),o(()=>a()("users__table_status"))),()=>(a(),o(()=>a()("users__table_joined"))),()=>(a(),o(()=>a()("users__table_action")))]),L("click",tr,()=>n(xe,!0)),oe(cr,()=>t(pe),i=>n(pe,i)),g(de,We),ga(),Se()}export{ms as component};
